name: Issue Notification
on:
  issues:
    types: [opened, edited, closed, reopened]
  issue_comment:
    types: [created]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Google Chat Notification
        uses: SimonScholz/google-chat-action@main
        with:
          webhookUrl: ${{ secrets.GOOGLE_CHAT_WEBHOOK }}
          # å…±é€šã®æƒ…å ±ã‚’éè¡¨ç¤ºã«ã—ã€ç‹¬è‡ªã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’çµ„ã¿ã¾ã™
          createDefaultSection: false
          title: "ğŸ“‹ Issueæ›´æ–°: ${{ github.event.issue.title }}"
          # ã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆæƒ…å ±ã®ç®±ï¼‰ã‚’åˆ†ã‘ã‚‹ã“ã¨ã§ã€å¼·åˆ¶çš„ã«ç¸¦ä¸¦ã³ã«ã—ã¾ã™
          additionalSections: |
            [
              {
                "widgets": [
                  { "decoratedText": { "topLabel": "ğŸ‘¤ å®Ÿè¡Œè€…", "text": "${{ github.actor }} (${{ github.event.action }})" } },
                  { "decoratedText": { "topLabel": "ğŸ“ å†…å®¹", "text": "${{ github.event.issue.body || github.event.comment.body }}" } },
                  { "decoratedText": { "topLabel": "ğŸ”— URL", "text": "<a href='${{ github.event.issue.html_url }}'>ãƒªãƒ³ã‚¯ã‚’é–‹ã</a>" } }
                ]
              }
            ]
